(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"0175":function(e,t,o){"use strict";o("7774")},"5ebe":function(e,t,o){},"622a":function(e,t,o){},7159:function(e,t,o){e.exports=o.p+"static/img/img.146655c9.jpg"},"75d0":function(e,t,o){},7774:function(e,t,o){},"7ed4":function(e,t,o){"use strict";var s=o("2b0e"),i=new s["default"];t["a"]=i},bfe9:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wrapper"},[o("v-head"),o("div",{staticClass:"content-box content-collapse"},[o("div",{staticClass:"content"},[o("transition",{attrs:{name:"move",mode:"out-in"}},[o("keep-alive",{attrs:{include:e.tagsList}},[o("router-view")],1)],1)],1)])],1)},i=[],n=(o("7f7f"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"header"},[o("div",{staticClass:"header-left"},[o("el-input",{staticClass:"input-with-select",staticStyle:{width:"500px"},model:{value:e.command,callback:function(t){e.command=t},expression:"command"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-edit"},slot:"append"})],1)],1),o("div",{staticClass:"header-left"},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Tips: we could put some notes here",placement:"top-start"}},[o("i",{staticClass:"el-icon-warning-outline"})])],1),o("div",{staticClass:"header-right"},[o("div",{staticClass:"header-user-con"},[o("div",{staticClass:"btn-fullscreen",on:{click:e.handleFullScreen}},[o("el-tooltip",{attrs:{effect:"dark",content:e.fullscreen?"cancel full screen ":"full screen",placement:"bottom"}},[o("i",{staticClass:"el-icon-lx-full"})])],1),e._m(0),o("el-dropdown",{staticClass:"user-name",attrs:{trigger:"click"},on:{command:e.handleCommand}},[o("span",{staticClass:"el-dropdown-link"},[e._v("\n                    "+e._s(e.username)+"\n                    "),o("i",{staticClass:"el-icon-caret-bottom"})]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{divided:"",command:"loginout"}},[o("i",{staticClass:"el-icon-user-solid"}),e._v("Log out\n                    ")]),o("el-dropdown-item",{attrs:{divided:"",command:"configuration"}},[o("i",{staticClass:"el-icon-s-tools"}),e._v("Settings\n                    ")])],1)],1)],1)]),o("el-dialog",{attrs:{title:"Settings",visible:e.configVisible},on:{"update:visible":function(t){e.configVisible=t}}},[o("el-dialog",{attrs:{width:"38%",title:"User Profile",visible:e.dropboxConfigVisible,"append-to-body":""},on:{"update:visible":function(t){e.dropboxConfigVisible=t}}},[o("div",[o("el-form",{attrs:{model:e.userProfile}},[o("el-form-item",{attrs:{label:"Username","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.userProfile.username,callback:function(t){e.$set(e.userProfile,"username",t)},expression:"userProfile.username"}})],1),o("el-form-item",{attrs:{label:"Email address","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.userProfile.email,callback:function(t){e.$set(e.userProfile,"email",t)},expression:"userProfile.email"}})],1),o("el-form-item",{attrs:{label:"organization","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.userProfile.organization,callback:function(t){e.$set(e.userProfile,"organization",t)},expression:"userProfile.organization"}})],1),o("el-form-item",{attrs:{label:"Job Title","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.userProfile.jobTitle,callback:function(t){e.$set(e.userProfile,"jobTitle",t)},expression:"userProfile.jobTitle"}})],1),o("el-form-item",{attrs:{label:"Country","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.userProfile.country,callback:function(t){e.$set(e.userProfile,"country",t)},expression:"userProfile.country"}})],1),o("el-row",{staticClass:"el-row"},[o("el-col",{attrs:{span:6}},[o("el-card",[o("img",{staticClass:"image-in-setting",attrs:{src:"/static/images/common/dropbox-icon.png"}}),o("div",{staticStyle:{padding:"14px"}},[o("span",[e._v("Dropbox Token")]),o("p",[o("small",[e._v(e._s(e._.isEmpty(this.userProfile.dropboxToken)?"Not set Yet":this.userProfile.dropboxToken))])]),o("div",{staticClass:"bottom clearfix"},[o("el-button",{staticClass:"button",staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:function(t){return e.SetToken(0)}}},[e._v("Setting\n                                        ")]),o("el-button",{directives:[{name:"show",rawName:"v-show",value:!e._.isEmpty(e.userProfile.dropboxToken),expression:"!_.isEmpty(userProfile.dropboxToken)"}],staticClass:"button",attrs:{type:"text"},on:{click:e.clearToken}},[e._v("clear\n                                        ")])],1)])])],1)],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.changeProfile}},[e._v("Update")]),o("el-button",{on:{click:function(t){e.dropboxConfigVisible=!1}}},[e._v("cancel")])],1)],1)],1)]),o("div",{staticClass:"configuration-content"},[o("el-row",e._l(e.configObject,(function(t,s){return o("el-col",{key:t.title,attrs:{span:6,offset:1}},[o("el-card",{attrs:{"body-style":{padding:"0px"}}},[o("img",{staticClass:"image",attrs:{src:t.imageUrl}}),o("div",{staticStyle:{padding:"14px"}},[o("span",[e._v(e._s(t.title))]),o("div",{staticClass:"bottom clearfix"},[o("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:e.openUserProfile}},[e._v("Open Profile\n                                ")])],1)])])],1)})),1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.configVisible=!1}}},[e._v("OK")])],1)],1)],1)}),l=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-avator"},[s("img",{attrs:{src:o("7159")}})])}],a=o("7ed4"),r={data:function(){return{collapse:!1,fullscreen:!1,name:"linxin",message:2,configVisible:!1,dropboxConfigVisible:!1,currentDate:new Date,configObject:[{title:"User Profile",imageUrl:"/static/images/common/user-profile-icon.png",type:"user",configuration:localStorage.getItem("token"),date:localStorage.getItem("dropBoxTokenDate")}],selectedTokenIndex:0,detailVisible:!1,command:"",userProfile:{username:"",email:"",organization:"",jobTitle:"",country:"",dropboxToken:""},formLabelWidth:"120px"}},computed:{username:function(){var e=localStorage.getItem("username");return e||this.name}},methods:{handleCommand:function(e){"loginout"===e?(localStorage.removeItem("username"),localStorage.removeItem("token"),localStorage.removeItem("dropBoxTokenDate"),this.$router.push("/login")):"configuration"===e&&(this.refreshData(),this.configVisible=!0)},collapseChage:function(){this.collapse=!this.collapse,a["a"].$emit("collapse",this.collapse)},handleFullScreen:function(){var e=document.documentElement;this.fullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.fullscreen=!this.fullscreen},showTokenInfo:function(e){this.detailVisible=!0},SetToken:function(e){var t=this;0===e&&this.$prompt("Please entry your DropBox token","Notification",{confirmButtonText:"confirm",cancelButtonText:"cancel"}).then((function(e){var o=e.value;_.isEmpty(o)?t.$message({type:"error",message:"Input is empty, please try again "}):(t.userProfile.dropboxToken=o,t.$axios({method:"post",url:"/Mediator",params:{action:"loadDropboxKey",userId:localStorage.getItem("username"),token:o}}).then((function(e){0===e.code?t.$axios({method:"post",url:"/listDropbox",params:{token:o,fileName:""}}).then((function(e){localStorage.setItem("token",o),localStorage.setItem("dropBoxTokenDate",(new Date).format("yyyy-MM-dd hh:mm:ss")),t.$message({type:"success",message:"token set success, token is: "+o}),console.log("init in header"),a["a"].$emit("dropboxInited",e),t.refreshData(),t.$forceUpdate()})):console.log(e)})).catch((function(e){console.log(e)})))})).catch((function(){t.$message({type:"info",message:"User Cancel"})}))},openUserProfile:function(){this.dropboxConfigVisible=!0,this.initUserInfo()},clearToken:function(){this.userProfile.dropboxToken="",a["a"].$emit("userClearToken"),this.$message.success("token is cleared, now is using default file list")},changeProfile:function(){var e=this;this.$axios({url:"/updateProfile",method:"post",params:{email:this.userProfile.email,username:""!==this.userProfile.username?this.userProfile.username:null,organization:""!==this.userProfile.organization?this.userProfile.organization:null,jobTitle:""!==this.userProfile.jobTitle?this.userProfile.jobTitle:null,country:""!==this.userProfile.country?this.userProfile.country:null,dropboxToken:""!==this.userProfile.dropboxToken?this.userProfile.dropboxToken:null}}).then((function(t){0===t.code?(e.$axios({method:"post",url:"/profile",params:{email:e.userProfile.email}}).then((function(t){console.log(t),0===t.code&&(localStorage.setItem("userInfo",JSON.stringify(t.data)),e.initUserInfo(),e.$message.success("Success!"))})).catch((function(e){console.log(e)})),e.dropboxConfigVisible=!1):e.$message.error(t.msg)})).catch((function(e){console.log(e)}))},refreshData:function(){this.configObject[0].isInit=!!localStorage.getItem("token"),this.configObject[0].configuration=localStorage.getItem("token"),this.configObject[0].date=localStorage.getItem("dropBoxTokenDate")},initUserInfo:function(){var e=JSON.parse(localStorage.getItem("userInfo"));this.userProfile.country=e.country,this.userProfile.username=e.username,this.userProfile.email=e.email,this.userProfile.organization=e.organization,this.userProfile.jobTitle=e.jobTitle,this.userProfile.dropboxToken="no"===e.dropboxToken?"":e.dropboxToken}},mounted:function(){document.body.clientWidth<1500&&this.collapseChage(),this.initUserInfo()}},c=r,u=(o("fe60"),o("cd2e"),o("2877")),f=Object(u["a"])(c,n,l,!1,null,"24cc2676",null),d=f.exports,m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"sidebar"},[o("el-menu",{staticClass:"sidebar-el-menu",attrs:{"default-active":e.onRoutes,collapse:e.collapse,"background-color":"#324157","text-color":"#bfcbd9","active-text-color":"#20a0ff","unique-opened":"",router:""}},[e._l(e.items,(function(t){return[t.subs?[o("el-submenu",{key:t.index,attrs:{index:t.index}},[o("template",{slot:"title"},[o("i",{class:t.icon}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])]),e._l(t.subs,(function(t){return[t.subs?o("el-submenu",{key:t.index,attrs:{index:t.index}},[o("template",{slot:"title"},[e._v(e._s(t.title))]),e._l(t.subs,(function(t,s){return o("el-menu-item",{key:s,attrs:{index:t.index}},[e._v(e._s(t.title))])}))],2):o("el-menu-item",{key:t.index,attrs:{index:t.index}},[e._v(e._s(t.title))])]}))],2)]:[o("el-menu-item",{key:t.index,attrs:{index:t.index}},[o("i",{class:t.icon}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])]]}))],2)],1)},p=[],h=(o("a481"),{data:function(){return{collapse:!1,items:[{icon:"el-icon-lx-home",index:"updates",title:"Update log"},{icon:"el-icon-lx-home",index:"workflow-panel",title:"workflow panel"},{icon:"el-icon-lx-home",index:"code",title:"code editor"}]}},computed:{onRoutes:function(){return this.$route.path.replace("/","")}},created:function(){var e=this;a["a"].$on("collapse",(function(t){e.collapse=t,a["a"].$emit("collapse-content",t)}))}}),g=h,b=(o("0175"),Object(u["a"])(g,m,p,!1,null,"475e6a3f",null)),v=b.exports,x=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.showTags?o("div",{staticClass:"tags"},[o("ul",e._l(e.tagsList,(function(t,s){return o("li",{key:s,staticClass:"tags-li",class:{active:e.isActive(t.path)}},[o("router-link",{staticClass:"tags-li-title",attrs:{to:t.path}},[e._v("\n                "+e._s(t.title)+"\n            ")]),o("span",{staticClass:"tags-li-icon",on:{click:function(t){return e.closeTags(s)}}},[o("i",{staticClass:"el-icon-close"})])],1)})),0),o("div",{staticClass:"tags-close-box"},[o("el-dropdown",{on:{command:e.handleTags}},[o("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("\n                tag selection"),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),o("el-dropdown-menu",{attrs:{slot:"dropdown",size:"small"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"other"}},[e._v("close other")]),o("el-dropdown-item",{attrs:{command:"all"}},[e._v("close all")])],1)],1)],1)]):e._e()},k=[],P={data:function(){return{tagsList:[]}},methods:{isActive:function(e){return e===this.$route.fullPath},closeTags:function(e){var t=this.tagsList.splice(e,1)[0],o=this.tagsList[e]?this.tagsList[e]:this.tagsList[e-1];o?t.path===this.$route.fullPath&&this.$router.push(o.path):this.$router.push("/")},closeAll:function(){this.tagsList=[],this.$router.push("/")},closeOther:function(){var e=this,t=this.tagsList.filter((function(t){return t.path===e.$route.fullPath}));this.tagsList=t},setTags:function(e){var t=this.tagsList.some((function(t){return t.path===e.fullPath}));t||(this.tagsList.length>=8&&this.tagsList.shift(),this.tagsList.push({title:e.meta.title,path:e.fullPath,name:e.matched[1].components.default.name})),a["a"].$emit("tags",this.tagsList)},handleTags:function(e){"other"===e?this.closeOther():this.closeAll()}},computed:{showTags:function(){return this.tagsList.length>0}},watch:{$route:function(e,t){this.setTags(e)}},created:function(){var e=this;this.setTags(this.$route),a["a"].$on("close_current_tags",(function(){for(var t=0,o=e.tagsList.length;t<o;t++){var s=e.tagsList[t];if(s.path===e.$route.fullPath){t<o-1?e.$router.push(e.tagsList[t+1].path):t>0?e.$router.push(e.tagsList[t-1].path):e.$router.push("/"),e.tagsList.splice(t,1);break}}}))}},w=P,C=(o("c5f3"),Object(u["a"])(w,x,k,!1,null,null,null)),y=C.exports,T={data:function(){return{tagsList:[],collapse:!1}},components:{vHead:d,vSidebar:v,vTags:y},created:function(){var e=this;a["a"].$on("collapse-content",(function(t){e.collapse=t})),a["a"].$on("tags",(function(t){for(var o=[],s=0,i=t.length;s<i;s++)t[s].name&&o.push(t[s].name);e.tagsList=o}))}},$=T,S=Object(u["a"])($,s,i,!1,null,null,null);t["default"]=S.exports},c5f3:function(e,t,o){"use strict";o("5ebe")},cd2e:function(e,t,o){"use strict";o("622a")},fe60:function(e,t,o){"use strict";o("75d0")}}]);